---
import type { CollectionEntry } from "astro:content";
import BaseHead from "@components/BaseHead.astro";
import BaseHTML from "@layouts/BaseHTML.astro";
import { Picture } from "astro:assets";
import FormattedDate from "@components/FormattedDate.astro";

type Props = CollectionEntry<"post">["data"];

const { title, description, pubDate, updatedDate, heroImage, aspect } =Astro.props;

const aspectRatio = (aspect === undefined ? '' : `aspect-ratio: ${aspect};`);
---

<BaseHTML>
	<BaseHead slot="header" title={title} description={description} image={heroImage.src} type="article" />
	<article>
		<div class="hero-image">
			<!-- {heroImage && <img width={1020} height={510} src={heroImage} alt="" />} -->
			<!-- <Image
				width={1020}
				height={510}
				src={heroImage}
				style={aspectRatio}
				class="object-cover"
				alt="Cover image"
			/> -->
			<Picture
				formats={["avif", "webp"]}
				width={1020}
				height={510}
				src={heroImage}
				style={aspectRatio}
				class="object-cover"
				loading={'eager'}
				alt="Cover image"
			/>
		</div>
		<div class="">
			<div class="title">
				<div class="date">
					<FormattedDate date={pubDate} />
					{
						updatedDate && (
							<div class="last-updated-on">
								Last updated on <FormattedDate date={updatedDate} />
							</div>
						)
					}
				</div>
				<h1 class="mb-2">{title}</h1>
				<hr class="py-0 mt-4 mb-2" />
			</div>
			<slot />
		</div>
	</article>
</BaseHTML>